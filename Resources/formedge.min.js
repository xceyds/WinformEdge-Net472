(function(n){function r(t){n.chrome?.webview?.postMessage&&t.message?n.chrome.webview.postMessage(t):console.error("[window.chrome.webview.postMessage] is not supported in this environment.")}function u(t,i){n.dispatchEvent(new Event(t,{detail:i}))}function o(n){if(n.state!==undefined){const{state:t}=n,i=document.querySelector("html");t?u("windowactivated",{}):u("windowdeactivate",{});i?.classList.toggle("window--activated",t);i?.classList.toggle("window--deactivated",!t)}}function h(n){const{state:t}=n;if(t){u("windowstatechange",{state:t});const i=document.querySelector("html");i?.classList.toggle("window--maximized",t==="maximized");i?.classList.toggle("window--minimized",t==="minimized");i?.classList.toggle("window--fullscreen",t==="fullscreen")}}function c(n){const{x:t,y:i,width:r,height:f}=n;u("windowresize",{x:t,y:i,width:r,height:f})}function l(n){const{x:t,y:i,screenX:r,screenY:f}=n;u("windowmove",{x:t,y:i,screenX:r,screenY:f})}function t(){if(n.chrome?.webview?.hostObjects?.sync?.hostWindow)return n.chrome?.webview?.hostObjects?.sync?.hostWindow}function a(){const n=t();n&&n.Minimize()}function v(){const n=t();n&&n.Maximize()}function y(){const n=t();n&&n.Restore()}function p(){const n=t();n&&n.Fullscreen()}function w(){const n=t();n&&n.ToggleFullscreen()}function b(){const n=t();n&&n.Close()}function k(){const n=t();n&&n.Activate()}function d(){const n=t();if(n)return n.Activated}function g(){const n=t();if(n)return n.WindowState}function nt(){const n=t();if(n)return n.HasTitleBar}function it(){const n=t();if(n)return n.FormedgeVersion}function rt(){const n=t();if(n)return n.ChromiumVersion}const f=`app-command`,i=`{{FORMEDGE_MESSAGE_PASSCODE}}`,s=`{{WINFORMEDGE_VERSION}}`,e=`{{HAS_TITLE_BAR}}`==="true";n.formedgeVersion=s;n.moveTo=(n,t)=>{r({passcode:i,message:"FormedgeWindowMoveTo",x:n,y:t})};n.resizeTo=(n,t)=>{r({passcode:i,message:"FormedgeWindowResizeTo",width:n,height:t})};n.moveBy=(n,t)=>{r({passcode:i,message:"FormedgeWindowMoveBy",dx:n,dy:t})};n.resizeBy=(n,t)=>{r({passcode:i,message:"FormedgeWindowResizeBy",dx:n,dy:t})};n.addEventListener("load",()=>{const t=document.querySelector("html");n.addEventListener("click",n=>{const t=n.button;if(t===0){let t=n.target;while(t&&!t.hasAttribute(f))t=t.parentElement;if(t){const n=t.getAttribute(f)?.toLowerCase();r({passcode:i,message:"FormedgeWindowCommand",command:n})}}});n.chrome?.webview?.addEventListener&&n.chrome.webview.addEventListener("message",n=>{const{passcode:t,message:r}=n.data;if(t===i)switch(r){case"FormedgeNotifyWindowStateChange":h(n.data);break;case"FormedgeNotifyWindowResize":c(n.data);break;case"FormedgeNotifyWindowMove":l(n.data);break;case"FormedgeNotifyWindowActivated":o(n.data)}});o({passcode:i,message:"FormedgeNotifyWindowActivated",state:!0});t?.classList.toggle("window__titlbar--shown",e);t?.classList.toggle("window__titlbar--hidden",!e)});class tt{get activated(){return d()}get hasTitleBar(){return nt()}get windowState(){return g()}activate(){k()}minimize(){a()}maximize(){v()}restore(){y()}fullscreen(){p()}toggleFullscreen(){w()}close(){b()}}class ut{version={get Formedge(){return it()},get Chromium(){return rt()}};}n.formedge=new ut;n.hostWindow=new tt})(window);